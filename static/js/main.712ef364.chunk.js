(this.webpackJsonplayers=this.webpackJsonplayers||[]).push([[0],{156:function(t,e,i){"use strict";i.r(e);var n=i(0),c=i.n(n),o=i(31),a=i.n(o),s=(i(97),i(98),i(34)),r=i(82),l=(i(149),i(81)),d=i.n(l),u=i(57),p=i.n(u),O=i(77),j=i(7),b=i(180),x=i(174),h=i(175);var f=i(5),m=[{title:"Streets",url:"mapbox://styles/mapbox/streets-v11",icon:"streets-v11"},{title:"Satellite",url:"mapbox://styles/mapbox/satellite-v9",icon:"satellite-v9"}],T=function(t){var e=t.setBasemap,i=t.viewport,c=t.mapboxApiAccessToken,o=function(t,e){var i=Object(n.useState)(t),c=Object(j.a)(i,2),o=c[0],a=c[1];return Object(n.useEffect)((function(){var i=setTimeout((function(){a(t)}),e);return function(){clearTimeout(i)}}),[t,e]),o}(i,1e3),a=m.map((function(t){return Object(n.useRef)(null)})),s=Object(n.useState)(!1),r=Object(j.a)(s,2),l=r[0],d=r[1];return Object(n.useEffect)((function(){setTimeout((function(){return d(!0)}),3e3)}),[]),Object(n.useEffect)((function(){if(l){var t=function(){var t=Object(O.a)(p.a.mark((function t(e){var i,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=new Image,n=m[e],i.onload=function(){var t=a[e].current,n=t.getContext("2d"),c=0;requestAnimationFrame((function e(){c+=.01,n.globalAlpha=c;var o=t.width,a=t.height;a>o?a=o/i.width*i.height:o=a/i.height*i.width,n.drawImage(i,0,0,o,a),c<1&&requestAnimationFrame(e)}))},i.src="https://api.mapbox.com/styles/v1/mapbox/".concat(n.icon,"/static/").concat(o.longitude,",").concat(o.latitude,",").concat(o.zoom,"/").concat(Math.min(o.width,1280),"x").concat(Math.min(o.height,1280),"?access_token=").concat(c);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Promise.all(m.map((function(e,i){return t(i)})))}}),[l,o,a,c]),Object(f.jsx)(b.a,{p:1,children:Object(f.jsx)(x.a,{children:Object(f.jsx)(b.a,{p:.5,display:"flex",flexDirection:"column",children:m.map((function(t,i){return Object(f.jsx)(h.a,{onClick:function(){e(t.url)},children:Object(f.jsx)("canvas",{ref:a[i],width:75,height:75})},i)}))})})})},g=i(178),S=i(78),_=i.n(S);var v=function(t){var e=t.viewport,i=t.basemap,c=t.mapboxApiAccessToken,o=t.setBasemap,a=t.setAddingLocations,s=t.addingLocations,r=Object(n.useState)(!1),l=Object(j.a)(r,2),d=l[0],u=l[1];return Object(n.useEffect)((function(){setTimeout((function(){return u(!0)}),3e3)}),[]),Object(f.jsxs)(g.a.div,{initial:{opacity:0},animate:{opacity:d>0?1:0},children:[Object(f.jsx)(T,{viewport:e,basemap:i,mapboxApiAccessToken:c,setBasemap:o}),Object(f.jsx)(b.a,{p:1,pt:0,children:Object(f.jsx)(x.a,{children:Object(f.jsx)(b.a,{p:.5,display:"flex",flexDirection:"column",children:Object(f.jsx)(h.a,{onClick:function(){a((function(t){return!t}))},children:Object(f.jsx)(_.a,{color:s?"success":"disabled"})})})})})]})},A=i(176),E=i(177),C=i(80),w=i.n(C),P=i(79),y=i.n(P);var I=function(){const[t,e]=Object(n.useState)({width:window.innerWidth,height:window.innerHeight,latitude:65.41,longitude:25.88,zoom:4.3}),[i,c]=Object(n.useState)(m[0].url),o=Object(n.useRef)();window.onresize=()=>{e({...t,width:window.innerWidth,height:window.innerHeight})};const a=Object(n.useCallback)((t=>{console.log(t),e((e=>({...e,...t})))}),[e]),[l,u]=Object(n.useState)([]),[p,O]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{console.log(l)}),[l]),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{style:{position:"absolute",zIndex:2},children:Object(f.jsx)(v,{viewport:t,basemap:i,mapboxApiAccessToken:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg"}).REACT_APP_MAPBOX_TOKEN,setBasemap:c,setAddingLocations:O,addingLocations:p})}),Object(f.jsx)("div",{style:{position:"absolute",top:0,left:0},children:Object(f.jsxs)(s.b,{...t,ref:o,mapStyle:i,onNativeClick:t=>{if(p){const e=t.lngLat;u(l.concat({id:(new Date).getTime(),latitude:e[1],longitude:e[0],popup:!1}))}},mapboxApiAccessToken:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg"}).REACT_APP_MAPBOX_TOKEN,onViewportChange:t=>e(t),children:[l.map((t=>{const e=`lat: ${t.latitude.toFixed(5)}, lng: ${t.longitude.toFixed(5)}`;return Object(f.jsxs)(f.Fragment,{children:[t.popup&&Object(f.jsx)(s.d,{latitude:t.latitude,longitude:t.longitude,style:{zIndex:100},closeButton:!1,children:Object(f.jsxs)(b.a,{display:"flex",flexDirection:"column",children:[Object(f.jsx)(b.a,{position:"absolute",top:"5px",right:"5px",children:Object(f.jsx)(A.a,{size:"small",onClick:()=>{u(l.map((e=>e.id===t.id?{...e,popup:!1}:e)))},children:Object(f.jsx)(y.a,{})})}),Object(f.jsx)(b.a,{children:Object(f.jsx)("br",{})}),Object(f.jsxs)(E.a,{children:[e,Object(f.jsx)(A.a,{size:"small",onClick:()=>navigator.clipboard.writeText(e),children:Object(f.jsx)(w.a,{fontSize:"16px"})})]})]})},t.id),Object(f.jsx)(g.a.div,{initial:{opacity:0},animate:{opacity:[0,.3,.5,1],translateY:[-100,0]},transition:{duration:.3,ease:"easeOut"},children:Object(f.jsx)(s.c,{offsetLeft:-12,offsetTop:-24,draggable:!0,latitude:t.latitude,longitude:t.longitude,onDragEnd:e=>{((t,e)=>{u(l.map((i=>i.id===t?{...i,latitude:e.lngLat[1],longitude:e.lngLat[0]}:i)))})(t.id,e)},onClick:e=>{var i;i=t.id,u(l.map((t=>t.id===i?{...t,popup:!0}:t)))},children:Object(f.jsx)(d.a,{color:"info"})},t.id)})]})})),o.current&&Object(f.jsx)(r.a,{mapRef:o,onViewportChange:a,mapboxApiAccessToken:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg"}).REACT_APP_MAPBOX_TOKEN,position:"top-right"})]})})]})};var R=function(){return Object(f.jsx)(I,{})},F=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,183)).then((function(e){var i=e.getCLS,n=e.getFID,c=e.getFCP,o=e.getLCP,a=e.getTTFB;i(t),n(t),c(t),o(t),a(t)}))};a.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(R,{})}),document.getElementById("root")),F()},97:function(t,e,i){},98:function(t,e,i){}},[[156,1,2]]]);
//# sourceMappingURL=main.712ef364.chunk.js.map