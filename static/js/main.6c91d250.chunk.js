(this.webpackJsonplayers=this.webpackJsonplayers||[]).push([[0],{100:function(t,e,n){},158:function(t,e,n){"use strict";n.r(e);var i=n(0),c=n.n(i),a=n(33),o=n.n(a),r=(n(99),n(100),n(20)),s=n(6),u=n(36),l=n(84),d=(n(151),n(83)),O=n.n(d),j=n(59),b=n.n(j),p=n(79),f=n(182),x=n(176),h=n(177);var m=n(5),T=[{title:"Streets",url:"mapbox://styles/mapbox/streets-v11",icon:"streets-v11"},{title:"Satellite",url:"mapbox://styles/mapbox/satellite-v9",icon:"satellite-v9"}],g=function(t){var e=t.setBasemap,n=t.viewport,c=t.mapboxApiAccessToken,a=function(t,e){var n=Object(i.useState)(t),c=Object(s.a)(n,2),a=c[0],o=c[1];return Object(i.useEffect)((function(){var n=setTimeout((function(){o(t)}),e);return function(){clearTimeout(n)}}),[t,e]),a}(n,1e3),o=T.map((function(t){return Object(i.useRef)(null)})),r=Object(i.useState)(!1),u=Object(s.a)(r,2),l=u[0],d=u[1];return Object(i.useEffect)((function(){setTimeout((function(){return d(!0)}),3e3)}),[]),Object(i.useEffect)((function(){if(l){var t=function(){var t=Object(p.a)(b.a.mark((function t(e){var n,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Image,i=T[e],n.onload=function(){var t=o[e].current,i=t.getContext("2d"),c=0;requestAnimationFrame((function e(){c+=.01,i.globalAlpha=c;var a=t.width,o=t.height;o>a?o=a/n.width*n.height:a=o/n.height*n.width,i.drawImage(n,0,0,a,o),c<1&&requestAnimationFrame(e)}))},n.src="https://api.mapbox.com/styles/v1/mapbox/".concat(i.icon,"/static/").concat(a.longitude,",").concat(a.latitude,",").concat(a.zoom,"/").concat(Math.min(a.width,1280),"x").concat(Math.min(a.height,1280),"?access_token=").concat(c);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Promise.all(T.map((function(e,n){return t(n)})))}}),[l,a,o,c]),Object(m.jsx)(f.a,{p:1,children:Object(m.jsx)(x.a,{children:Object(m.jsx)(f.a,{p:.5,display:"flex",flexDirection:"column",children:T.map((function(t,n){return Object(m.jsx)(h.a,{onClick:function(){e(t.url)},children:Object(m.jsx)("canvas",{ref:o[n],width:75,height:75})},n)}))})})})},v=n(180),S=n(80),_=n.n(S);var A=function(t){var e=t.viewport,n=t.basemap,c=t.mapboxApiAccessToken,a=t.setBasemap,o=t.setAddingLocations,r=t.addingLocations,u=Object(i.useState)(!1),l=Object(s.a)(u,2),d=l[0],O=l[1];return Object(i.useEffect)((function(){setTimeout((function(){return O(!0)}),3e3)}),[]),Object(m.jsxs)(v.a.div,{initial:{opacity:0},animate:{opacity:d>0?1:0},children:[Object(m.jsx)(g,{viewport:e,basemap:n,mapboxApiAccessToken:c,setBasemap:a}),Object(m.jsx)(f.a,{p:1,pt:0,children:Object(m.jsx)(x.a,{children:Object(m.jsx)(f.a,{p:.5,display:"flex",flexDirection:"column",children:Object(m.jsx)(h.a,{onClick:function(){o((function(t){return!t}))},children:Object(m.jsx)(_.a,{color:r?"success":"disabled"})})})})})]})},E=n(178),C=n(179),w=n(82),P=n.n(w),y=n(81),I=n.n(y);var R=function(){var t=Object(i.useState)({width:window.innerWidth,height:window.innerHeight,latitude:65.41,longitude:25.88,zoom:4.3}),e=Object(s.a)(t,2),n=e[0],c=e[1],a=Object(i.useState)(T[0].url),o=Object(s.a)(a,2),d=o[0],j=o[1],b=Object(i.useRef)();window.onresize=function(){c(Object(r.a)(Object(r.a)({},n),{},{width:window.innerWidth,height:window.innerHeight}))};var p=Object(i.useCallback)((function(t){console.log(t),c((function(e){return Object(r.a)(Object(r.a)({},e),t)}))}),[c]),x=Object(i.useState)([]),h=Object(s.a)(x,2),g=h[0],S=h[1],_=Object(i.useState)(!1),w=Object(s.a)(_,2),y=w[0],R=w[1];return Object(i.useEffect)((function(){console.log(g)}),[g]),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{position:"absolute",zIndex:2},children:Object(m.jsx)(A,{viewport:n,basemap:d,mapboxApiAccessToken:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg"}).REACT_APP_MAPBOX_TOKEN,setBasemap:j,setAddingLocations:R,addingLocations:y})}),Object(m.jsx)("div",{style:{position:"absolute",top:0,left:0},children:Object(m.jsxs)(u.b,Object(r.a)(Object(r.a)({},n),{},{ref:b,mapStyle:d,onNativeClick:function(t){if(y){var e=t.lngLat;S(g.concat({id:(new Date).getTime(),latitude:e[1],longitude:e[0],popup:!1}))}},mapboxApiAccessToken:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg"}).REACT_APP_MAPBOX_TOKEN,onViewportChange:function(t){return c(t)},children:[g.map((function(t){var e="lat: ".concat(t.latitude.toFixed(5),", lng: ").concat(t.longitude.toFixed(5));return Object(m.jsxs)(m.Fragment,{children:[t.popup&&Object(m.jsx)(u.d,{latitude:t.latitude,longitude:t.longitude,style:{zIndex:100},closeButton:!1,children:Object(m.jsxs)(f.a,{display:"flex",flexDirection:"column",children:[Object(m.jsx)(f.a,{position:"absolute",top:"5px",right:"5px",children:Object(m.jsx)(E.a,{size:"small",onClick:function(){S(g.map((function(e){return e.id===t.id?Object(r.a)(Object(r.a)({},e),{},{popup:!1}):e})))},children:Object(m.jsx)(I.a,{})})}),Object(m.jsx)(f.a,{children:Object(m.jsx)("br",{})}),Object(m.jsxs)(C.a,{children:[e,Object(m.jsx)(E.a,{size:"small",onClick:function(){return navigator.clipboard.writeText(e)},children:Object(m.jsx)(P.a,{fontSize:"16px"})})]})]})},t.id),Object(m.jsx)(v.a.div,{initial:{opacity:0},animate:{opacity:[0,.3,.5,1],translateY:[-100,0]},transition:{duration:.3,ease:"easeOut"},children:Object(m.jsx)(u.c,{offsetLeft:-12,offsetTop:-24,draggable:!0,latitude:t.latitude,longitude:t.longitude,onDragEnd:function(e){!function(t,e){S(g.map((function(n){return n.id===t?Object(r.a)(Object(r.a)({},n),{},{latitude:e.lngLat[1],longitude:e.lngLat[0]}):n})))}(t.id,e)},onClick:function(e){var n;n=t.id,S(g.map((function(t){return t.id===n?Object(r.a)(Object(r.a)({},t),{},{popup:!0}):t})))},children:Object(m.jsx)(O.a,{color:"info"})},t.id)})]})})),b.current&&Object(m.jsx)(l.a,{mapRef:b,onViewportChange:p,mapboxApiAccessToken:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg"}).REACT_APP_MAPBOX_TOKEN,position:"top-right"})]}))})]})};var F=function(){return Object(m.jsx)(R,{})},k=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,185)).then((function(e){var n=e.getCLS,i=e.getFID,c=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),i(t),c(t),a(t),o(t)}))};o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(F,{})}),document.getElementById("root")),k()},99:function(t,e,n){}},[[158,1,2]]]);
//# sourceMappingURL=main.6c91d250.chunk.js.map