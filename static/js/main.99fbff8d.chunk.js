(this.webpackJsonplayers=this.webpackJsonplayers||[]).push([[0],{156:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),a=n(31),o=n.n(a),s=(n(97),n(98),n(34)),r=n(82),l=(n(149),n(81)),u=n.n(l),d=n(57),p=n.n(d),j=n(77),b=n(7),x=n(180),h=n(174),O=n(175);var f=n(5),m=[{title:"Streets",url:"mapbox://styles/mapbox/streets-v11",icon:"streets-v11"},{title:"Satellite",url:"mapbox://styles/mapbox/satellite-v9",icon:"satellite-v9"}],g=function(e){var t=e.setBasemap,n=e.viewport,c=e.mapboxApiAccessToken,a=function(e,t){var n=Object(i.useState)(e),c=Object(b.a)(n,2),a=c[0],o=c[1];return Object(i.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a}(n,1e3),o=m.map((function(e){return Object(i.useRef)(null)})),s=Object(i.useState)(!1),r=Object(b.a)(s,2),l=r[0],u=r[1];return Object(i.useEffect)((function(){setTimeout((function(){return u(!0)}),3e3)}),[]),Object(i.useEffect)((function(){if(l){var e=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Image,i=m[t],n.onload=function(){var e=o[t].current,i=e.getContext("2d"),c=0;requestAnimationFrame((function t(){c+=.01,i.globalAlpha=c;var a=e.width,o=e.height;o>a?o=a/n.width*n.height:a=o/n.height*n.width,i.drawImage(n,0,0,a,o),c<1&&requestAnimationFrame(t)}))},n.src="https://api.mapbox.com/styles/v1/mapbox/".concat(i.icon,"/static/").concat(a.longitude,",").concat(a.latitude,",").concat(a.zoom,"/").concat(Math.min(a.width,1280),"x").concat(Math.min(a.height,1280),"?access_token=").concat(c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Promise.all(m.map((function(t,n){return e(n)})))}}),[l,a,o,c]),Object(f.jsx)(x.a,{p:1,children:Object(f.jsx)(h.a,{children:Object(f.jsx)(x.a,{p:.5,display:"flex",flexDirection:"column",children:m.map((function(e,n){return Object(f.jsx)(O.a,{onClick:function(){t(e.url)},children:Object(f.jsx)("canvas",{ref:o[n],width:75,height:75})},n)}))})})})},v=n(178),w=n(78),y=n.n(w);var I=function(e){var t=e.viewport,n=e.basemap,c=e.mapboxApiAccessToken,a=e.setBasemap,o=e.setAddingLocations,s=e.addingLocations,r=Object(i.useState)(!1),l=Object(b.a)(r,2),u=l[0],d=l[1];return Object(i.useEffect)((function(){setTimeout((function(){return d(!0)}),3e3)}),[]),Object(f.jsxs)(v.a.div,{initial:{opacity:0},animate:{opacity:u>0?1:0},children:[Object(f.jsx)(g,{viewport:t,basemap:n,mapboxApiAccessToken:c,setBasemap:a}),Object(f.jsx)(x.a,{p:1,pt:0,children:Object(f.jsx)(h.a,{children:Object(f.jsx)(x.a,{p:.5,display:"flex",flexDirection:"column",children:Object(f.jsx)(O.a,{onClick:function(){o((function(e){return!e}))},children:Object(f.jsx)(y.a,{color:s?"success":"disabled"})})})})})]})},T=n(176),k=n(177),A=n(80),C=n.n(A),S=n(79),F=n.n(S);var z=function(){const[e,t]=Object(i.useState)({width:window.innerWidth,height:window.innerHeight,latitude:65.41,longitude:25.88,zoom:4.3}),[n,c]=Object(i.useState)(m[0].url),a=Object(i.useRef)();window.onresize=()=>{t({...e,width:window.innerWidth,height:window.innerHeight})};const o=Object(i.useCallback)((e=>{console.log(e),t((t=>({...t,...e})))}),[t]),[l,d]=Object(i.useState)([]),[p,j]=Object(i.useState)(!1);return Object(i.useEffect)((()=>{console.log(l)}),[l]),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{style:{position:"absolute",zIndex:2},children:Object(f.jsx)(I,{viewport:e,basemap:n,mapboxApiAccessToken:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg",setBasemap:c,setAddingLocations:j,addingLocations:p})}),Object(f.jsx)("div",{style:{position:"absolute",top:0,left:0},children:Object(f.jsxs)(s.b,{...e,ref:a,mapStyle:n,onNativeClick:e=>{if(p){const t=e.lngLat;d(l.concat({id:(new Date).getTime(),latitude:t[1],longitude:t[0],popup:!1}))}},mapboxApiAccessToken:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg",onViewportChange:e=>t(e),children:[l.map((e=>{const t=`lat: ${e.latitude.toFixed(5)}, lng: ${e.longitude.toFixed(5)}`;return Object(f.jsxs)(f.Fragment,{children:[e.popup&&Object(f.jsx)(s.d,{latitude:e.latitude,longitude:e.longitude,style:{zIndex:100},closeButton:!1,children:Object(f.jsxs)(x.a,{display:"flex",flexDirection:"column",children:[Object(f.jsx)(x.a,{position:"absolute",top:"5px",right:"5px",children:Object(f.jsx)(T.a,{size:"small",onClick:()=>{d(l.map((t=>t.id===e.id?{...t,popup:!1}:t)))},children:Object(f.jsx)(F.a,{})})}),Object(f.jsx)(x.a,{children:Object(f.jsx)("br",{})}),Object(f.jsxs)(k.a,{children:[t,Object(f.jsx)(T.a,{size:"small",onClick:()=>navigator.clipboard.writeText(t),children:Object(f.jsx)(C.a,{fontSize:"16px"})})]})]})},e.id),Object(f.jsx)(v.a.div,{initial:{opacity:0},animate:{opacity:[0,.3,.5,1],translateY:[-100,0]},transition:{duration:.3,ease:"easeOut"},children:Object(f.jsx)(s.c,{offsetLeft:-12,offsetTop:-24,draggable:!0,latitude:e.latitude,longitude:e.longitude,onDragEnd:t=>{((e,t)=>{d(l.map((n=>n.id===e?{...n,latitude:t.lngLat[1],longitude:t.lngLat[0]}:n)))})(e.id,t)},onClick:t=>{var n;n=e.id,d(l.map((e=>e.id===n?{...e,popup:!0}:e)))},children:Object(f.jsx)(u.a,{color:"info"})},e.id)})]})})),a.current&&Object(f.jsx)(r.a,{mapRef:a,onViewportChange:o,mapboxApiAccessToken:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg",position:"top-right"})]})})]})};var B=function(){return Object(f.jsx)(z,{})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,183)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),c(e),a(e),o(e)}))};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(B,{})}),document.getElementById("root")),L()},97:function(e,t,n){},98:function(e,t,n){}},[[156,1,2]]]);
//# sourceMappingURL=main.99fbff8d.chunk.js.map