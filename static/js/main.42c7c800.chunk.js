(this.webpackJsonplayers=this.webpackJsonplayers||[]).push([[0],{120:function(e,t,i){"use strict";i.r(t);var n=i(0),s=i.n(n),c=i(29),a=i.n(c),o=(i(79),i(80),i(31)),l=i(64),r=(i(114),i(63)),d=i.n(r),p=i(144),j=i(138),b=i(139);var u=i(5);const h=[{title:"Streets",url:"mapbox://styles/mapbox/streets-v11",icon:"streets-v11"},{title:"Satellite",url:"mapbox://styles/mapbox/satellite-v9",icon:"satellite-v9"}];var x=function(e){let{setBasemap:t,viewport:i,mapboxApiAccessToken:s}=e;const c=function(e,t){const[i,s]=Object(n.useState)(e);return Object(n.useEffect)((()=>{const i=setTimeout((()=>{s(e)}),t);return()=>{clearTimeout(i)}}),[e,t]),i}(i,1e3),a=h.map((e=>Object(n.useRef)(null))),[o,l]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{setTimeout((()=>l(!0)),3e3)}),[]),Object(n.useEffect)((()=>{if(!o)return;Promise.all(h.map(((e,t)=>(async e=>{const t=new Image,i=h[e];t.onload=()=>{const i=a[e].current,n=i.getContext("2d");let s=0;const c=()=>{s+=.01,n.globalAlpha=s;let e=i.width,a=i.height,o=0,l=0;t.height>t.width?(a=e/t.width*t.height,l=(i.height-a)/2):(e=a/t.height*t.width,o=(i.width-e)/2),n.drawImage(t,o,l,e,a),s<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},t.src=`https://api.mapbox.com/styles/v1/mapbox/${i.icon}/static/${c.longitude},${c.latitude},${c.zoom}/${Math.min(c.width,1280)}x${Math.min(c.height,1280)}?access_token=${s}`})(t))))}),[o,c,a,s]),Object(u.jsx)(p.a,{p:1,children:Object(u.jsx)(j.a,{children:Object(u.jsx)(p.a,{pt:.5,pb:.5,display:"flex",flexDirection:"column",children:h.map(((e,i)=>Object(u.jsx)(b.a,{onClick:()=>{t(e.url)},children:Object(u.jsx)("canvas",{style:{border:"1px solid rgba(0, 0, 0, 0.5)",borderRadius:5},ref:a[i],width:50,height:50})},i)))})})})},m=i(142),O=i(60),g=i.n(O);var f=function(e){let{viewport:t,basemap:i,mapboxApiAccessToken:s,setBasemap:c,setAddingLocations:a,addingLocations:o}=e;const[l,r]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{setTimeout((()=>r(!0)),3e3)}),[]),Object(u.jsxs)(m.a.div,{initial:{opacity:0},animate:{opacity:l>0?1:0},children:[Object(u.jsx)(p.a,{p:1,pb:0,children:Object(u.jsx)(j.a,{children:Object(u.jsx)(p.a,{p:.5,display:"flex",flexDirection:"column",children:Object(u.jsx)(b.a,{onClick:()=>{a((e=>!e))},children:Object(u.jsx)(g.a,{color:o?"success":"disabled"})})})})}),Object(u.jsx)(x,{viewport:t,basemap:i,mapboxApiAccessToken:s,setBasemap:c})]})},w=i(140),v=i(141),y=i(62),k=i.n(y),A=i(61),T=i.n(A);const C="pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg";var S=function(){const[e,t]=Object(n.useState)({width:window.innerWidth,height:window.innerHeight,latitude:65.41,longitude:25.88,zoom:4.3}),[i,s]=Object(n.useState)(h[0].url),c=Object(n.useRef)();window.onresize=()=>{t({...e,width:window.innerWidth,height:window.innerHeight})};const a=Object(n.useCallback)((e=>{t(e)}),[]),[r,j]=Object(n.useState)([]),[b,x]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{console.log(r)}),[r]),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{position:"absolute",zIndex:2,bottom:30},children:Object(u.jsx)(f,{viewport:e,basemap:i,mapboxApiAccessToken:C,setBasemap:s,setAddingLocations:x,addingLocations:b})}),Object(u.jsx)("div",{style:{position:"absolute",top:0,left:0},children:Object(u.jsxs)(o.d,{...e,ref:c,mapStyle:i,onNativeClick:e=>{if(b){const t=e.lngLat;j(r.concat({id:(new Date).getTime(),latitude:t[1],longitude:t[0],popup:!1}))}},mapboxApiAccessToken:C,onViewportChange:e=>t(e),children:[r.map((e=>{const t=`lat: ${e.latitude.toFixed(5)}, lng: ${e.longitude.toFixed(5)}`;return Object(u.jsxs)(u.Fragment,{children:[e.popup&&Object(u.jsx)(o.c,{latitude:e.latitude,longitude:e.longitude,style:{zIndex:100},closeButton:!1,children:Object(u.jsxs)(p.a,{display:"flex",flexDirection:"column",children:[Object(u.jsx)(p.a,{position:"absolute",top:"5px",right:"5px",children:Object(u.jsx)(w.a,{size:"small",onClick:()=>{j(r.map((t=>t.id===e.id?{...t,popup:!1}:t)))},children:Object(u.jsx)(T.a,{})})}),Object(u.jsx)(p.a,{children:Object(u.jsx)("br",{})}),Object(u.jsxs)(v.a,{children:[t,Object(u.jsx)(w.a,{size:"small",onClick:()=>navigator.clipboard.writeText(t),children:Object(u.jsx)(k.a,{fontSize:"16px"})})]})]})},e.id),Object(u.jsx)(m.a.div,{initial:{opacity:0},animate:{opacity:[0,.3,.5,1],translateY:[-100,0]},transition:{duration:.3,ease:"easeOut"},children:Object(u.jsx)(o.b,{offsetLeft:-12,offsetTop:-24,draggable:!0,latitude:e.latitude,longitude:e.longitude,onDragEnd:t=>{((e,t)=>{j(r.map((i=>i.id===e?{...i,latitude:t.lngLat[1],longitude:t.lngLat[0]}:i)))})(e.id,t)},onClick:t=>{var i;i=e.id,j(r.map((e=>e.id===i?{...e,popup:!0}:e)))},children:Object(u.jsx)(d.a,{color:"info"})},e.id)})]})})),Object(u.jsx)(l.a,{mapRef:c,onViewportChange:a,mapboxApiAccessToken:C,position:"top-right"})]})})]})};var F=function(){return Object(u.jsx)(S,{})};var I=e=>{e&&e instanceof Function&&i.e(3).then(i.bind(null,147)).then((t=>{let{getCLS:i,getFID:n,getFCP:s,getLCP:c,getTTFB:a}=t;i(e),n(e),s(e),c(e),a(e)}))};a.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(F,{})}),document.getElementById("root")),I()},79:function(e,t,i){},80:function(e,t,i){}},[[120,1,2]]]);
//# sourceMappingURL=main.42c7c800.chunk.js.map