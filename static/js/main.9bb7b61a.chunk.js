(this.webpackJsonplayers=this.webpackJsonplayers||[]).push([[0],{120:function(e,t,i){"use strict";i.r(t);var n=i(0),c=i.n(n),s=i(29),a=i.n(s),o=(i(79),i(80),i(31)),l=i(64),r=(i(114),i(63)),d=i.n(r),p=i(144),j=i(138),b=i(139);var u=i(5);const x=[{title:"Streets",url:"mapbox://styles/mapbox/streets-v11",icon:"streets-v11"},{title:"Satellite",url:"mapbox://styles/mapbox/satellite-v9",icon:"satellite-v9"}];var h=function(e){let{setBasemap:t,viewport:i,mapboxApiAccessToken:c}=e;const s=function(e,t){const[i,c]=Object(n.useState)(e);return Object(n.useEffect)((()=>{const i=setTimeout((()=>{c(e)}),t);return()=>{clearTimeout(i)}}),[e,t]),i}(i,1e3),a=x.map((e=>Object(n.useRef)(null))),[o,l]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{setTimeout((()=>l(!0)),3e3)}),[]),Object(n.useEffect)((()=>{if(!o)return;Promise.all(x.map(((e,t)=>(async e=>{const t=new Image,i=x[e];t.onload=()=>{const i=a[e].current,n=i.getContext("2d");let c=0;const s=()=>{c+=.01,n.globalAlpha=c;let e=i.width,a=i.height;a>e?a=e/t.width*t.height:e=a/t.height*t.width,n.drawImage(t,0,0,e,a),c<1&&requestAnimationFrame(s)};requestAnimationFrame(s)},t.src=`https://api.mapbox.com/styles/v1/mapbox/${i.icon}/static/${s.longitude},${s.latitude},${s.zoom}/${Math.min(s.width,1280)}x${Math.min(s.height,1280)}?access_token=${c}`})(t))))}),[o,s,a,c]),Object(u.jsx)(p.a,{p:1,children:Object(u.jsx)(j.a,{children:Object(u.jsx)(p.a,{p:.5,display:"flex",flexDirection:"column",children:x.map(((e,i)=>Object(u.jsx)(b.a,{onClick:()=>{t(e.url)},children:Object(u.jsx)("canvas",{ref:a[i],width:75,height:75})},i)))})})})},O=i(142),m=i(60),g=i.n(m);var f=function(e){let{viewport:t,basemap:i,mapboxApiAccessToken:c,setBasemap:s,setAddingLocations:a,addingLocations:o}=e;const[l,r]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{setTimeout((()=>r(!0)),3e3)}),[]),Object(u.jsxs)(O.a.div,{initial:{opacity:0},animate:{opacity:l>0?1:0},children:[Object(u.jsx)(h,{viewport:t,basemap:i,mapboxApiAccessToken:c,setBasemap:s}),Object(u.jsx)(p.a,{p:1,pt:0,children:Object(u.jsx)(j.a,{children:Object(u.jsx)(p.a,{p:.5,display:"flex",flexDirection:"column",children:Object(u.jsx)(b.a,{onClick:()=>{a((e=>!e))},children:Object(u.jsx)(g.a,{color:o?"success":"disabled"})})})})})]})},w=i(140),v=i(141),y=i(62),I=i.n(y),T=i(61),k=i.n(T);var A=function(){const[e,t]=Object(n.useState)({width:window.innerWidth,height:window.innerHeight,latitude:65.41,longitude:25.88,zoom:4.3}),[i,c]=Object(n.useState)(x[0].url),s=Object(n.useRef)();window.onresize=()=>{t({...e,width:window.innerWidth,height:window.innerHeight})};const a=Object(n.useCallback)((e=>{console.log(e),t((t=>({...t,...e})))}),[t]),[r,j]=Object(n.useState)([]),[b,h]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{console.log(r)}),[r]),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{position:"absolute",zIndex:2},children:Object(u.jsx)(f,{viewport:e,basemap:i,mapboxApiAccessToken:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg",setBasemap:c,setAddingLocations:h,addingLocations:b})}),Object(u.jsx)("div",{style:{position:"absolute",top:0,left:0},children:Object(u.jsxs)(o.b,{...e,ref:s,mapStyle:i,onNativeClick:e=>{if(b){const t=e.lngLat;j(r.concat({id:(new Date).getTime(),latitude:t[1],longitude:t[0],popup:!1}))}},mapboxApiAccessToken:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg",onViewportChange:e=>t(e),children:[r.map((e=>{const t=`lat: ${e.latitude.toFixed(5)}, lng: ${e.longitude.toFixed(5)}`;return Object(u.jsxs)(u.Fragment,{children:[e.popup&&Object(u.jsx)(o.d,{latitude:e.latitude,longitude:e.longitude,style:{zIndex:100},closeButton:!1,children:Object(u.jsxs)(p.a,{display:"flex",flexDirection:"column",children:[Object(u.jsx)(p.a,{position:"absolute",top:"5px",right:"5px",children:Object(u.jsx)(w.a,{size:"small",onClick:()=>{j(r.map((t=>t.id===e.id?{...t,popup:!1}:t)))},children:Object(u.jsx)(k.a,{})})}),Object(u.jsx)(p.a,{children:Object(u.jsx)("br",{})}),Object(u.jsxs)(v.a,{children:[t,Object(u.jsx)(w.a,{size:"small",onClick:()=>navigator.clipboard.writeText(t),children:Object(u.jsx)(I.a,{fontSize:"16px"})})]})]})},e.id),Object(u.jsx)(O.a.div,{initial:{opacity:0},animate:{opacity:[0,.3,.5,1],translateY:[-100,0]},transition:{duration:.3,ease:"easeOut"},children:Object(u.jsx)(o.c,{offsetLeft:-12,offsetTop:-24,draggable:!0,latitude:e.latitude,longitude:e.longitude,onDragEnd:t=>{((e,t)=>{j(r.map((i=>i.id===e?{...i,latitude:t.lngLat[1],longitude:t.lngLat[0]}:i)))})(e.id,t)},onClick:t=>{var i;i=e.id,j(r.map((e=>e.id===i?{...e,popup:!0}:e)))},children:Object(u.jsx)(d.a,{color:"info"})},e.id)})]})})),s.current&&Object(u.jsx)(l.a,{mapRef:s,onViewportChange:a,mapboxApiAccessToken:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg",position:"top-right"})]})})]})};var C=function(){return Object(u.jsx)(A,{})};var S=e=>{e&&e instanceof Function&&i.e(3).then(i.bind(null,147)).then((t=>{let{getCLS:i,getFID:n,getFCP:c,getLCP:s,getTTFB:a}=t;i(e),n(e),c(e),s(e),a(e)}))};a.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(C,{})}),document.getElementById("root")),S()},79:function(e,t,i){},80:function(e,t,i){}},[[120,1,2]]]);
//# sourceMappingURL=main.9bb7b61a.chunk.js.map