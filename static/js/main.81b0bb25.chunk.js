(this.webpackJsonplayers=this.webpackJsonplayers||[]).push([[0],{153:function(e,t,i){"use strict";i.r(t);var n=i(0),c=i.n(n),s=i(31),o=i.n(s),a=(i(95),i(96),i(34)),l=i(80),r=(i(147),i(79)),d=i.n(r),p=i(177),j=i(171),b=i(172),u=i(7);var h=i(5);const x=[{title:"Streets",url:"mapbox://styles/mapbox/streets-v11",icon:"streets-v11"},{title:"Satellite",url:"mapbox://styles/mapbox/satellite-v9",icon:"satellite-v9"}];var O=function(e){let{setBasemap:t,viewport:i,mapboxApiAccessToken:c}=e;const s=function(e,t){var i=Object(n.useState)(e),c=Object(u.a)(i,2),s=c[0],o=c[1];return Object(n.useEffect)((function(){var i=setTimeout((function(){o(e)}),t);return function(){clearTimeout(i)}}),[e,t]),s}(i,1e3),o=x.map((e=>Object(n.useRef)(null))),[a,l]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{setTimeout((()=>l(!0)),3e3)}),[]),Object(n.useEffect)((()=>{if(!a)return;Promise.all(x.map(((e,t)=>(async e=>{const t=new Image,i=x[e];t.onload=()=>{const i=o[e].current,n=i.getContext("2d");let c=0;const s=()=>{c+=.01,n.globalAlpha=c;let e=i.width,o=i.height,a=0,l=0;t.height>t.width?(o=e/t.width*t.height,l=(i.height-o)/2):(e=o/t.height*t.width,a=(i.width-e)/2),n.drawImage(t,a,l,e,o),c<1&&requestAnimationFrame(s)};requestAnimationFrame(s)},t.src=`https://api.mapbox.com/styles/v1/mapbox/${i.icon}/static/${s.longitude},${s.latitude},${s.zoom}/${Math.min(s.width,1280)}x${Math.min(s.height,1280)}?access_token=${c}`})(t))))}),[a,s,o,c]),Object(h.jsx)(p.a,{p:1,children:Object(h.jsx)(j.a,{children:Object(h.jsx)(p.a,{pt:.5,pb:.5,display:"flex",flexDirection:"column",children:x.map(((e,i)=>Object(h.jsx)(b.a,{onClick:()=>{t(e.url)},children:Object(h.jsx)("canvas",{style:{border:"1px solid rgba(0, 0, 0, 0.5)",borderRadius:5},ref:o[i],width:50,height:50})},i)))})})})},m=i(175),g=i(76),f=i.n(g);var w=function(e){let{viewport:t,basemap:i,mapboxApiAccessToken:c,setBasemap:s,setAddingLocations:o,addingLocations:a}=e;const[l,r]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{setTimeout((()=>r(!0)),3e3)}),[]),Object(h.jsxs)(m.a.div,{initial:{opacity:0},animate:{opacity:l>0?1:0},children:[Object(h.jsx)(p.a,{p:1,pb:0,children:Object(h.jsx)(j.a,{children:Object(h.jsx)(p.a,{p:.5,display:"flex",flexDirection:"column",children:Object(h.jsx)(b.a,{onClick:()=>{o((e=>!e))},children:Object(h.jsx)(f.a,{color:a?"success":"disabled"})})})})}),Object(h.jsx)(O,{viewport:t,basemap:i,mapboxApiAccessToken:c,setBasemap:s})]})},v=i(173),y=i(174),I=i(78),T=i.n(I),k=i(77),A=i.n(k);var S=function(){const[e,t]=Object(n.useState)({width:window.innerWidth,height:window.innerHeight,latitude:65.41,longitude:25.88,zoom:4.3}),[i,c]=Object(n.useState)(x[0].url),s=Object(n.useRef)();window.onresize=()=>{t({...e,width:window.innerWidth,height:window.innerHeight})};const o=Object(n.useCallback)((e=>{console.log(e),t((t=>({...t,...e})))}),[t]),[r,j]=Object(n.useState)([]),[b,u]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{console.log(r)}),[r]),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:{position:"absolute",zIndex:2,bottom:30},children:Object(h.jsx)(w,{viewport:e,basemap:i,mapboxApiAccessToken:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg",setBasemap:c,setAddingLocations:u,addingLocations:b})}),Object(h.jsx)("div",{style:{position:"absolute",top:0,left:0},children:Object(h.jsxs)(a.b,{...e,ref:s,mapStyle:i,onNativeClick:e=>{if(b){const t=e.lngLat;j(r.concat({id:(new Date).getTime(),latitude:t[1],longitude:t[0],popup:!1}))}},mapboxApiAccessToken:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg",onViewportChange:e=>t(e),children:[r.map((e=>{const t=`lat: ${e.latitude.toFixed(5)}, lng: ${e.longitude.toFixed(5)}`;return Object(h.jsxs)(h.Fragment,{children:[e.popup&&Object(h.jsx)(a.d,{latitude:e.latitude,longitude:e.longitude,style:{zIndex:100},closeButton:!1,children:Object(h.jsxs)(p.a,{display:"flex",flexDirection:"column",children:[Object(h.jsx)(p.a,{position:"absolute",top:"5px",right:"5px",children:Object(h.jsx)(v.a,{size:"small",onClick:()=>{j(r.map((t=>t.id===e.id?{...t,popup:!1}:t)))},children:Object(h.jsx)(A.a,{})})}),Object(h.jsx)(p.a,{children:Object(h.jsx)("br",{})}),Object(h.jsxs)(y.a,{children:[t,Object(h.jsx)(v.a,{size:"small",onClick:()=>navigator.clipboard.writeText(t),children:Object(h.jsx)(T.a,{fontSize:"16px"})})]})]})},e.id),Object(h.jsx)(m.a.div,{initial:{opacity:0},animate:{opacity:[0,.3,.5,1],translateY:[-100,0]},transition:{duration:.3,ease:"easeOut"},children:Object(h.jsx)(a.c,{offsetLeft:-12,offsetTop:-24,draggable:!0,latitude:e.latitude,longitude:e.longitude,onDragEnd:t=>{((e,t)=>{j(r.map((i=>i.id===e?{...i,latitude:t.lngLat[1],longitude:t.lngLat[0]}:i)))})(e.id,t)},onClick:t=>{var i;i=e.id,j(r.map((e=>e.id===i?{...e,popup:!0}:e)))},children:Object(h.jsx)(d.a,{color:"info"})},e.id)})]})})),s.current&&Object(h.jsx)(l.a,{mapRef:s,style:{fontSize:"12px"},onViewportChange:o,mapboxApiAccessToken:"pk.eyJ1IjoicGFsaWtrIiwiYSI6ImNrdnV0cG1mejBxbTYyb2p0OWI4c3FwYzUifQ.rOxZMX2Ozv495OthpRCTpg",position:"top-right"})]})})]})};var C=function(){return Object(h.jsx)(S,{})},z=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,180)).then((function(t){var i=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;i(e),n(e),c(e),s(e),o(e)}))};o.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(C,{})}),document.getElementById("root")),z()},95:function(e,t,i){},96:function(e,t,i){}},[[153,1,2]]]);
//# sourceMappingURL=main.81b0bb25.chunk.js.map